<p align="center" >  <img src="https://www.flooz.me/img/logo/flooz.png" alt="Flooz" title="Flooz" width="300px"></p>![build passing](http://b.repl.ca/v1/build-passing-brightgreen.png)![version 3.2.0](http://b.repl.ca/v1/version-3.2.0-lightgrey.png)![platform android](http://b.repl.ca/v1/platform-android-lightgrey.png)![dependencies deprecated](http://b.repl.ca/v1/dependencies-deprecated-red.png)[![twitter @floozme](http://b.repl.ca/v1/twitter-@floozme-blue.png)](http://twitter.com/floozme)# InstallationFlooz uses [Gradle](https://gradle.org) as dependency manager, which automates and simplifies the process of using 3rd-party libraries.## Installation process```bash$ git clone https://github.com/larafale/flooz-android.git$ cd flooz-android$ open -a /Applications/Android\ Studio.app ./flooz-android```> Gradle Build Tools 24.+ and Android Studio 2.2 are required to build Flooz.# Architecture## [Libraries](https://github.com/larafale/flooz-android/blob/master/app/build.gradle)| Name | Version  | Notes ||:-------------------------------:|:--------------------:|:------------------------------------------------------------------:|| [RoundedImageView](https://github.com/vinc3m1/RoundedImageView) | _2.2.1_ | A fast ImageView that supports rounded corners, ovals, and circles. || [ViewPagerIndicator](https://github.com/JakeWharton/ViewPagerIndicator) | _2.4.1_ | Paging indicator widgets compatible with the ViewPager from the Android Support Library and ActionBarSherlock || [StickyListHeaders](https://github.com/emilsjolander/StickyListHeaders) | _2.7.0_ | An android library for section headers that stick to the top || [MaterialDesignLibrary](https://github.com/navasmdc/MaterialDesignLibrary) | _1.5_ | This is a library with components of Android L to you use in android 2.2 || [PhotoView](https://github.com/chrisbanes/PhotoView) | _1.3.0_ | Implementation of ImageView for Android that supports zooming, by various touch gestures. || [Android Segmented Control](https://github.com/Kaopiz/android-segmented-control) | _1.0.6_ | ios UISegmentedControl for android || [DotProgressBar](https://github.com/silvestrpredko/DotProgressBarExample) | _1.0_ | It's a simple dot progress bar || [Blurry](https://github.com/wasabeef/Blurry) | _2.0.3_ | Blurry is an easy blur library for Android || [CreditCardEntry](https://github.com/dbachelder/CreditCardEntry) | _1.4.7_ | Smooth UI for Credit Card Entry on Android device, regex check for supported credit card types and luhn check. Inspired by Square credit card entry interface || [Card.io](https://github.com/card-io/card.io-Android-SDK) | _5.3.4_ | card.io provides fast, easy credit card scanning in mobile apps || [Fresco](https://github.com/facebook/fresco) | _0.12.0_ | An Android library for managing images and the memory they use. || [Android Async Http](https://github.com/loopj/android-async-http) | _1.4.9_ | An Asynchronous HTTP Library for Android || [Android Universal Image Loader](https://github.com/nostra13/Android-Universal-Image-Loader) | _1.9.5_ | Powerful and flexible library for loading, caching and displaying images on Android. || [SocketIO](https://github.com/socketio/socket.io-client-java) | _0.7.0_ | Full-featured Socket.IO Client Library for Java, which is compatible with Socket.IO v1.0 and later. || [BarcodeScanner](https://github.com/dm77/barcodescanner) | _1.8.4_ | Android library projects that provides easy to use and extensible Barcode Scanner views based on ZXing and ZBar || [Zxing](https://github.com/zxing/zxing) | _3.2.1_ | Official ZXing ("Zebra Crossing") project home || [Reprint](https://github.com/ajalt/reprint) | _2.7.2_ | A unified fingerprint library for android. || [Genius Android](https://github.com/qiujuer/Genius-Android) | _2.0.0-beta4_ | Android Material Design Theme UI and Tool Library.  || [libphonenumber](https://github.com/googlei18n/libphonenumber) | _7.7.0_ | Google's common Java, C++ and JavaScript library for parsing, formatting, and validating international phone numbers. || [TinyTask](https://github.com/inaka/TinyTask) | _v1_ | A tiny Android library to create async background tasks. || [AndroidDeviceNames](https://github.com/tslamic/AndroidDeviceNames) | _1.1_ | A tiny Android library that transforms the device model name into something users can understand. || [Butterknife](https://github.com/JakeWharton/butterknife) | _8.4.0_ | Bind Android views and callbacks to fields and methods. || [Mixpanel](https://github.com/mixpanel/mixpanel-android) | _4.9.2_ | An Android library for Mixpanel Analytics || [Android Location Tracker](https://github.com/quentin7b/android-location-tracker) | _3.2_ | Android helper that tracks user location || [Facebook](https://github.com/facebook/facebook-android-sdk) | _4.10.0_ | Used to integrate Android apps with Facebook Platform. || [Branch.io](https://github.com/BranchMetrics/android-branch-deep-linking) | _2.4.4_ | Deferred Deep Linking SDK for Android apps powered by Branch Metrics. We help mobile apps grow with deep links / deeplinks that power referral systems, sharing links and invites with full attribution and analytics. || [Crashlytics](https://docs.fabric.io/android/crashlytics/installation.html) | _2.6.4_ | Part of Twitter Fabric, Crashlytics offers the most powerful, yet lightest weight crash reporting solution for Android |## [Models](https://github.com/larafale/flooz-android/tree/master/app/src/main/java/me/flooz/app/Model)#####The models are initialized from API calls, several kinds of models are available:- [`FLButton`](https://github.com/larafale/flooz-android/blob/master/app/src/main/java/me/flooz/app/Model/FLButton.java) _Button object, handle events using Triggers_- [`FLComment`](https://github.com/larafale/flooz-android/blob/master/app/src/main/java/me/flooz/app/Model/FLComment.java) _Transaction and pot comment object_- [`FLCountry`](https://github.com/larafale/flooz-android/blob/master/app/src/main/java/me/flooz/app/Model/FLCountry.java) _Country object with flag, phone prefix..._- [`FLCreditCard`](https://github.com/larafale/flooz-android/blob/master/app/src/main/java/me/flooz/app/Model/FLCreditCard.java) _Credit card object with holder, card number, expires..._- [`FLError`](https://github.com/larafale/flooz-android/blob/master/app/src/main/java/me/flooz/app/Model/FLError.java) _In-App alert object (appear from top)_- [`FLNotification`](https://github.com/larafale/flooz-android/blob/master/app/src/main/java/me/flooz/app/Model/FLNotification.java) _Notification object (text, cAt)_- [`FLPreset`](https://github.com/larafale/flooz-android/blob/master/app/src/main/java/me/flooz/app/Model/FLPreset.java) _Preset object used for initalizing new collect or new flooz view from Triggers_- [`FLReport`](https://github.com/larafale/flooz-android/blob/master/app/src/main/java/me/flooz/app/Model/FLReport.java) _Report object used when sending user or transaction report to the API_- [`FLShareText`](https://github.com/larafale/flooz-android/blob/master/app/src/main/java/me/flooz/app/Model/FLShareText.java) _Invitations texts used for app sharing (Fb, twitter, mail, sms)_- [`FLShopItem`](https://github.com/larafale/flooz-android/blob/master/app/src/main/java/me/flooz/app/Model/FLShopItem.java) _Shop item can be a product or category_- [`FLSocial`](https://github.com/larafale/flooz-android/blob/master/app/src/main/java/me/flooz/app/Model/FLSocial.java) _Social data from collect and transactions (nbLikes, nbComments, ...)_- [`FLTexts`](https://github.com/larafale/flooz-android/blob/master/app/src/main/java/me/flooz/app/Model/FLTexts.java) _Texts sended from API, used to manage all kinds of content within the app_- [`FLTransaction`](https://github.com/larafale/flooz-android/blob/master/app/src/main/java/me/flooz/app/Model/FLTransaction.java) _Transaction object (can be a pot)_- [`FLTrigger`](https://github.com/larafale/flooz-android/blob/master/app/src/main/java/me/flooz/app/Model/FLTrigger.java) _Trigger object with next triggers, data and kind_- [`FLUser`](https://github.com/larafale/flooz-android/blob/master/app/src/main/java/me/flooz/app/Model/FLUser.java) _User object with all visible informations_## UIThe UI part of Flooz is based entirely on code, no xibs or storyboards are used in the project, almost every view is a specific class that can be found in the [Views](https://github.com/larafale/flooz-ios/tree/master/Flooz/Views) folder. Lot of widgets are available in this folder including but not only:- [`FLActionButton`](https://github.com/larafale/flooz-ios/tree/master/Flooz/Views/FLActionButton) & [`FLBorderedActionButton`](https://github.com/larafale/flooz-ios/tree/master/Flooz/Views/FLBorderedActionButton) _Button widget with flooz colors_- [`FLImageView`](https://github.com/larafale/flooz-ios/tree/master/Flooz/Views/FLImageView) _ImageView subclass handling setting image from URL_- [`FLPhoneField`](https://github.com/larafale/flooz-ios/tree/master/Flooz/Views/FLPhoneField) _Phone number input with country picker_- [`FLTableView`](https://github.com/larafale/flooz-ios/tree/master/Flooz/Views/FLTableView) _TableView subclass with flooz colors_- [`FLTextField`](https://github.com/larafale/flooz-ios/tree/master/Flooz/Views/FLTextField) _TextField subclass handling many kinds of type (number, text, email, date, url, ...) with validator and floatLabel_[Controllers](https://github.com/larafale/flooz-ios/tree/master/Flooz/Controllers) used in the project are subclasses of [GlobalViewController](https://github.com/larafale/flooz-ios/blob/master/Flooz/Views/BaseViewController/GlobalViewController.m) or [BaseViewController](https://github.com/larafale/flooz-ios/blob/master/Flooz/Views/BaseViewController/BaseViewController.m), wich handle view template generation (backgroundColor, contentView, navigationBar, navigationItems).## Networking### [JSON REST](http://http://api.flooz.me/docs?secret=secret)Api documentation can be found [here](http://api.flooz.me/docs?secret=secret), it contains all routes and their parameters.[AFNetworking](http://cocoadocs.org/docsets/AFNetworking) is used for all network requests and all responses are formatted in JSON.User access token is added, with several other info’s (device, version, os, ...), in every requests as an URL parameter.The [Flooz](https://github.com/larafale/flooz-ios/tree/master/Flooz/Library/Flooz) singleton contains all requests, user data, texts sanded from api and socket handler.Succeeding requests will return one of the following template:- Unique object	```javascript		{			code: 200,			item: Object,			triggers: [Trigger],			popup: PopupData		}	```- List of objects	```javascript		{			code: 200,			items: [Object],			triggers: [Trigger],			popup: PopupData		}	```	- List of objects with pagination	```javascript		{			code: 200,			items: [Object],			next: NextURL			triggers: [Trigger],			popup: PopupData		}	```### [SocketIO](http://socket.io)Sockets are used in this project for live events or updating information, sockets are handle with [SocketIO](http://socket.io). Two sockets feed are listening:- `event` _can contain popup or triggers_- `feed` _update number of unread notifications, can also contain triggers_## TriggersA [Trigger](https://github.com/larafale/flooz-ios/blob/master/Flooz/Models/FLTrigger.h) is a special object send by the API, it's used for multiple purpose and is define by a key.Most of the time Triggers will be in an array, each element of this array will be executed one after another by the [FLTriggerManager](https://github.com/larafale/flooz-ios/tree/master/Flooz/Library/FLTriggerManager).### Structure```javascript	{		key: 'namespace:view:action',		delay: 0,		data: {},		triggers: [Trigger]	}```#### key : string (required)	The key is a string formatted in three part with namespace first, then view and finally an action. Only the view part can be left empty. Between each component a `:` is required.Key format: `namespace:view:action`* namespace: represent the context of the trigger _(ex: app, pay, card, shop, settings, ...)_ * view: define the specific view in the namespace where the trigger will take effect* action: define the kind of effects the trigger will have; several action is available:	* ask _(request permissions (notifs, facebook)_	* call _(http::call used to make http request on the API or a specific URL)_	* clear _(clear local data)_	* hide _(hide specific view defined by the namespace and the view)_	* login _(force user identification)_		* logout _(logout current user from the app)_	* open _(open specific URL with native phone view)_	* picker _(pick specific content and send it through is next triggers)_	* send _(send images from current transaction or pot)_	* show _(show specific view defined by the namespace and the view)_	* sync _(force updating specific data)_	#### delay : float Execution of a trigger can be delayed with this parameter. Value has to be set in seconds.#### data : jsonObject Parameters specific to each trigger. Learn more using the push playground [here](http://dashboard-dev.flooz.me/push).	#### data : array\<Trigger>Array of Triggers executed one after another when the current Trigger is done.### Usage#### ButtonsLots of buttons within the app use Triggers to do actions and are sets by the API. It's the case for all home menu buttons, popup buttons, accept/refuse/participate/close buttons, ...#### Payment ProcessThe payment process in any part of the app is actually based on triggers sended by one http request. The API respond with a list of Triggers starting with a confirmation popup, then authenticate user using fingerprint or secure code and finally process the payment (if necessary a process where the user can register is credit card or cash-in from audiotel can be add in the process).#### PickersPickers are specific kind of triggers used for picking a user, an image or a scope and send it in the data of is successTrigger.#### URL SchemeFlooz can be opened using a url scheme and in this url can be inserted Triggers that will be executed when the app his running and the user authenticated. URL: `flooz://` #### NotificationsIn push notifications or internal notifications Triggers are used to handle what the app has to do when the user interacts with these notifications.## CreditsFlooz is owned and maintained by the [Flooz SAS](https://www.flooz.me).### Security DisclosureIf you believe you have identified a security vulnerability with Flooz, you should report it as soon as possible via email to dev@flooz.me. Please do not post it to a public issue tracker.